(window.webpackJsonp=window.webpackJsonp||[]).push([[1034],{1455:function(t,s,a){"use strict";a.r(s);var r=a(9),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"过程管理器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过程管理器"}},[t._v("#")]),t._v(" 过程管理器")]),t._v(" "),a("p",[t._v("在本指南中，我们将看到如何使用流程管理器启动 Strapi 应用程序。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("在这个例子中，我们将使用 "),a("a",{attrs:{href:"https://pm2.keymetrics.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PM2"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"安装-pm2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-pm2"}},[t._v("#")]),t._v(" 安装 PM2")]),t._v(" "),a("p",[a("code",[t._v("PM2")]),t._v(" 允许您保持您的 Strapi 项目活着，并重新加载它没有停机。")]),t._v(" "),a("p",[t._v("你将在全球安装 PM2")]),t._v(" "),a("Tabs",{attrs:{type:"border-card"}},[a("Tab",{attrs:{label:"yarn"}},[a("p",[a("code",[t._v("yarn global add pm2")])])]),t._v(" "),a("Tab",{attrs:{label:"npm"}},[a("p",[a("code",[t._v("npm install pm2 -g")])])])],1),t._v(" "),a("h2",{attrs:{id:"基本用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[t._v("#")]),t._v(" 基本用法")]),t._v(" "),a("h3",{attrs:{id:"创建-编辑-server-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-编辑-server-js"}},[t._v("#")]),t._v(" 创建/编辑 server.js")]),t._v(" "),a("p",[t._v("使用 PM2 启动应用程序的基本用法是运行一个命令，如下面的 "),a("code",[t._v("pm2 start server.js")]),t._v("。")]),t._v(" "),a("p",[t._v("但我们现在面临一个问题。在你的项目中，你没有一个 "),a("code",[t._v(".js")]),t._v(" 文件来运行 Strapi 应用程序。")]),t._v(" "),a("p",[t._v("因此，首先让我们创建一个 "),a("code",[t._v("server.js")]),t._v(" 文件，它可以让您运行 "),a("code",[t._v("pm2")]),t._v(" 命令。")]),t._v(" "),a("p",[a("strong",[t._v("Path —")]),t._v(" "),a("code",[t._v("./server.js")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" strapi "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'strapi'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strapi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("现在你可以通过运行 "),a("code",[t._v("pm2 start server.js")]),t._v(" 来启动服务器了。")]),t._v(" "),a("h3",{attrs:{id:"从-strapi-命令开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-strapi-命令开始"}},[t._v("#")]),t._v(" 从 strapi 命令开始")]),t._v(" "),a("p",[t._v("默认情况下有两个重要的命令。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("yarn develop")]),t._v(" 以开发模式启动项目.")]),t._v(" "),a("li",[a("code",[t._v("yarn start")]),t._v(" 开始制作你的应用程序.")])]),t._v(" "),a("p",[t._v("您还可以使用 "),a("code",[t._v("yarn start")]),t._v(" 命令启动流程管理器。")]),t._v(" "),a("p",[a("code",[t._v("pm2 start npm --name app -- run start")])]),t._v(" "),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("p",[a("code",[t._v("PM2")]),t._v(" 允许您创建一个配置文件来保存所有信息，以便在任何时候正确启动服务器。")]),t._v(" "),a("p",[t._v("通过运行 "),a("code",[t._v("pm2 init")]),t._v("，它将在你的应用程序中嵌入一个 "),a("code",[t._v("ecosystem.config.js")]),t._v("。")]),t._v(" "),a("p",[t._v("然后用下面的代码替换该文件的内容。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  apps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'npm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'start'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("然后运行 "),a("code",[t._v("pm2 start ecosystem.config.js")]),t._v(" 启动 pm2 进程。")]),t._v(" "),a("p",[t._v("您可以在 "),a("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/application-declaration/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PM2 生态系统文件文档"),a("OutboundLink")],1),t._v(" 中看到可用配置的完整文档。")])],1)}),[],!1,null,null,null);s.default=e.exports}}]);