(window.webpackJsonp=window.webpackJsonp||[]).push([[1044],{1466:function(t,e,o){"use strict";o.r(e);var r=o(9),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"_21yunbox"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_21yunbox"}},[t._v("#")]),t._v(" 21YunBox")]),t._v(" "),o("p",[t._v("This guide explains how to update an existing Strapi project so it can be deployed on "),o("a",{attrs:{href:"https://www.21yunbox.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("21YunBox"),o("OutboundLink")],1),t._v(".")]),t._v(" "),o("p",[t._v("21YunBox provides a Chinese CDN, continuous deployment, one-click HTTPS and "),o("a",{attrs:{href:"https://www.21yunbox.com/docs/#/",target:"_blank",rel:"noopener noreferrer"}},[t._v("other services such as managed databases and backend web services"),o("OutboundLink")],1),t._v(", allowing to launch web projects in China.")]),t._v(" "),o("p",[t._v("With persistent disks and managed PostgreSQL databases, 21YunBox gives you multiple different ways to store your content. 21YunBox services come with fully managed SSL, so it's no longer necessary to set up a proxy server to secure your Strapi app. Since 21YunBox services are automatically restarted if they become unresponsive, you don't need to use a process manager like "),o("code",[t._v("pm2")]),t._v(" either.")]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),o("p",[t._v("详细信息 consult "),o("a",{attrs:{href:"https://www.21yunbox.com/docs/#/deploy-strapi",target:"_blank",rel:"noopener noreferrer"}},[t._v("21YunBox's Deploy Strapi guide"),o("OutboundLink")],1)])]),t._v(" "),o("h2",{attrs:{id:"prerequisites"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),o("p",[t._v("This guide assumes you already have a Strapi project to deploy. If you need a project, use the "),o("RouterLink",{attrs:{to:"/developer-docs/latest/getting-started/quick-start.html"}},[t._v("Quick Start")]),t._v(" to get started or fork 21YunBox's Strapi 例子:")],1),t._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://gitee.com/eryiyunbox-examples/hello-strapi-sqlite",target:"_blank",rel:"noopener noreferrer"}},[t._v("Strapi with SQLite Starter"),o("OutboundLink")],1)]),t._v(" "),o("li",[o("a",{attrs:{href:"https://gitee.com/eryiyunbox-examples/hello-strapi-postgres",target:"_blank",rel:"noopener noreferrer"}},[t._v("Strapi with Postgres Starter"),o("OutboundLink")],1)])]),t._v(" "),o("h2",{attrs:{id:"setup"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[t._v("#")]),t._v(" Setup")]),t._v(" "),o("p",[t._v("Follow the procedure below to set up a Strapi CMS on 21YunBox:")]),t._v(" "),o("ol",[o("li",[o("p",[t._v("Create a 21YunBox account. If you don't already have one, visit "),o("a",{attrs:{href:"https://https://www.21yunbox.com/u/signup/",target:"_blank",rel:"noopener noreferrer"}},[t._v("21YunBox dashboard"),o("OutboundLink")],1),t._v(".")])]),t._v(" "),o("li",[o("p",[t._v("Create a new web service on 21YunBox, and give 21YunBox permission to access your GitHub or Gitee repo.")])]),t._v(" "),o("li",[o("p",[t._v("Use the following values during creation:")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("Setting")]),t._v(" "),o("th",[t._v("Value")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[o("strong",[t._v("Environment")])]),t._v(" "),o("td",[o("code",[t._v("Node 12.19")])])]),t._v(" "),o("tr",[o("td",[o("strong",[t._v("Build Command")])]),t._v(" "),o("td",[o("code",[t._v("yarn && yarn build")]),t._v(" (or your own build command)")])]),t._v(" "),o("tr",[o("td",[o("strong",[t._v("Publish Directory")])]),t._v(" "),o("td",[o("code",[t._v("rsync -a public/ /data/public/ && yarn start")]),t._v(" (or your own output directory)")])])])])]),t._v(" "),o("li",[o("p",[t._v("Add the following environment variables:")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("Setting")]),t._v(" "),o("th",[t._v("Value")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[o("strong",[t._v("NODE_ENV")])]),t._v(" "),o("td",[o("code",[t._v("production")])])]),t._v(" "),o("tr",[o("td",[o("strong",[t._v("DATABASE_FILENAME")])]),t._v(" "),o("td",[t._v("If you use SQLite database, use "),o("code",[t._v("/data/strapi.db")])])]),t._v(" "),o("tr",[o("td",[o("strong",[t._v("DATABASE_URL")])]),t._v(" "),o("td",[t._v("If you use Postgres database, paste the database URL here (we have demo video below if you are unsure)")])])])])]),t._v(" "),o("li",[o("p",[t._v('点击 "Deploy" 按钮')])])]),t._v(" "),o("p",[t._v("That's it! Your site will be live on your 21YunBox URL (e.g. "),o("code",[t._v("yoursite.21yunbox.com")]),t._v(") as soon as the build is done.")]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),o("p",[t._v("If you are unsure the steps above, 21YunBox has created a webcast for each of them:")]),t._v(" "),o("ul",[o("li",[t._v("Part 1: "),o("a",{attrs:{href:"https://www.bilibili.com/video/BV1fK4y1j7U8?zw",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo how to deploy Strapi with SQLite in production"),o("OutboundLink")],1)]),t._v(" "),o("li",[t._v("Part 2: "),o("a",{attrs:{href:"https://www.bilibili.com/video/BV1Ta4y1W7bD?zw",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo how to get in the development mode and create content on Strapi"),o("OutboundLink")],1)]),t._v(" "),o("li",[t._v("Part 3: "),o("a",{attrs:{href:"https://www.bilibili.com/video/BV1Nf4y1k7ZP/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo how to deploy Strapi with database in production"),o("OutboundLink")],1)])])]),t._v(" "),o("h2",{attrs:{id:"continuous-deploys"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#continuous-deploys"}},[t._v("#")]),t._v(" Continuous deploys")]),t._v(" "),o("p",[t._v("Now that 21YunBox is connected to your repo, it will automatically build and publish your site any time you push to Gitee or GitHub.")]),t._v(" "),o("h2",{attrs:{id:"custom-domains"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#custom-domains"}},[t._v("#")]),t._v(" Custom domains")]),t._v(" "),o("p",[t._v("Add your own domains to your site easily using 21YunBox's "),o("a",{attrs:{href:"https://www.21yunbox.com/docs/#/custom-domains",target:"_blank",rel:"noopener noreferrer"}},[t._v("custom domains"),o("OutboundLink")],1),t._v(" guide.")]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),o("p",[t._v("If you need customized deployment with Strapi, please contact "),o("a",{attrs:{href:"https://www.21yunbox.com/docs/#/contact",target:"_blank",rel:"noopener noreferrer"}},[t._v("21YunBox"),o("OutboundLink")],1),t._v(".")])])])}),[],!1,null,null,null);e.default=a.exports}}]);