(window.webpackJsonp=window.webpackJsonp||[]).push([[1070],{1492:function(e,t,a){"use strict";a.r(t);var s=a(9),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"migration-guide-from-3-4-x-to-3-4-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migration-guide-from-3-4-x-to-3-4-4"}},[e._v("#")]),e._v(" Migration guide from 3.4.x to 3.4.4")]),e._v(" "),a("p",[a("strong",[e._v("Make sure your server is not running until the end of the migration")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("If you are using "),a("strong",[e._v("extensions")]),e._v(" to create custom code or modifying existing code, you will need to update your code and compare your version to the new changes on the repository.\n"),a("br"),e._v("\nNot updating your "),a("strong",[e._v("extensions")]),e._v(" can break your app in unexpected ways that we cannot predict.")])]),e._v(" "),a("h2",{attrs:{id:"migration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migration"}},[e._v("#")]),e._v(" Migration")]),e._v(" "),a("h3",{attrs:{id:"_1-update-the-application-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-update-the-application-dependencies"}},[e._v("#")]),e._v(" 1. Update the application dependencies")]),e._v(" "),a("p",[e._v("First, update the application dependencies as usual by following the basic "),a("RouterLink",{attrs:{to:"/developer-docs/latest/update-migration-guides/update-version.html"}},[e._v("version update guide")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"_2-migrate-instagram-login-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-migrate-instagram-login-config"}},[e._v("#")]),e._v(" 2. Migrate Instagram Login Config")]),e._v(" "),a("p",[e._v("If you use or plan to use the "),a("strong",[e._v("Instagram login")]),e._v(", this migration is "),a("strong",[e._v("required")]),e._v(". Otherwise it is just recommended to do it (in case you use it one day).")]),e._v(" "),a("p",[e._v("Recently Instagram shutdown their API in favor of a new one (see "),a("a",{attrs:{href:"https://www.instagram.com/developer/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.instagram.com/developer/"),a("OutboundLink")],1),e._v("). As a result, the scope Strapi uses for the instagram API has to be updated.")]),e._v(" "),a("h4",{attrs:{id:"for-sql-databases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-sql-databases"}},[e._v("#")]),e._v(" For SQL databases:")]),e._v(" "),a("ul",[a("li",[e._v("In your database, find the table "),a("code",[e._v("core_store")])]),e._v(" "),a("li",[e._v("In that table, find the row with the key "),a("code",[e._v("plugin_users-permissions_grant")])]),e._v(" "),a("li",[e._v("In that row, find the "),a("code",[e._v("value")]),e._v(" column (it's JSON)")]),e._v(" "),a("li",[e._v("In this JSON, find the "),a("code",[e._v("instagram")]),e._v(" attribute and edit it to add "),a("code",[e._v('"scope": ["user_profile"]')]),e._v(" (‚ö†Ô∏è becareful to respect the JSON format)")])]),e._v(" "),a("div",{staticClass:"language-diff extra-class"},[a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[e._v("...\n"),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v(' "instagram": {\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "enabled": true,\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "icon": "instagram",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "key": "1234",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "secret": "abcd",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "callback": "https://myfrontend.com/connect/instagram/redirect",\n')])]),a("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[a("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "redirectUri": "http://mybackend.com/connect/instagram/callback"\n')])]),a("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "redirectUri": "http://mybackend.com/connect/instagram/callback",\n')]),a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "scope": ["user_profile"]\n')])]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v(" },\n")])]),e._v("...\n")])])]),a("ul",[a("li",[e._v("Save it")])]),e._v(" "),a("h4",{attrs:{id:"for-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-mongodb"}},[e._v("#")]),e._v(" For mongoDB:")]),e._v(" "),a("ul",[a("li",[e._v("In your database, find the collection "),a("code",[e._v("core_store")])]),e._v(" "),a("li",[e._v("In that collection, find the document with the key "),a("code",[e._v("plugin_users-permissions_grant")])]),e._v(" "),a("li",[e._v("In that document, find the "),a("code",[e._v("value")]),e._v(" field (it's JSON)")]),e._v(" "),a("li",[e._v("In this JSON, find the "),a("code",[e._v("instagram")]),e._v(" attribute and edit it to add "),a("code",[e._v('"scope": ["user_profile"]')]),e._v(" (‚ö†Ô∏è becareful to respect the JSON format)")])]),e._v(" "),a("div",{staticClass:"language-diff extra-class"},[a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[e._v("...\n"),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v(' "instagram": {\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "enabled": true,\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "icon": "instagram",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "key": "1234",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "secret": "abcd",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "callback": "https://myfrontend.com/connect/instagram/redirect",\n')])]),a("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[a("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "redirectUri": "http://mybackend.com/connect/instagram/callback"\n')])]),a("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "redirectUri": "http://mybackend.com/connect/instagram/callback",\n')]),a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v('   "scope": ["user_profile"]\n')])]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[e._v(" },\n")])]),e._v("...\n")])])]),a("ul",[a("li",[e._v("Save it")])]),e._v(" "),a("p",[e._v("üéâ Congrats, your application has been migrated!")])])}),[],!1,null,null,null);t.default=n.exports}}]);